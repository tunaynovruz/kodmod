---
sidebar_label: Test Pyramid
---
# Test Pyramid

The test pyramid is a testing strategy that defines the ideal distribution of different types of tests.

## Pyramid Structure

```
    /\
   /  \    E2E Tests (Few)
  /____\
 /      \   Integration Tests (Some)
/_______\
|        |  Unit Tests (Many)
|________|
```

## Test Levels

### Unit Tests (Base)
- **Quantity**: Many (70-80%)
- **Speed**: Very fast
- **Scope**: Individual components
- **Cost**: Low

### Integration Tests (Middle)
- **Quantity**: Some (15-20%)
- **Speed**: Medium
- **Scope**: Component interactions
- **Cost**: Medium

### End-to-End Tests (Top)
- **Quantity**: Few (5-10%)
- **Speed**: Slow
- **Scope**: Complete user workflows
- **Cost**: High

## Java Example

<details>
<summary>Koda bax</summary>

```java
// Unit Test (Base of pyramid)
@Test
void calculateTotal_WithValidItems_ReturnsSum() {
    Calculator calc = new Calculator();
    assertEquals(15, calc.add(10, 5));
}

// Integration Test (Middle)
@Test
@SpringBootTest
void userController_SavesUser_ToDatabase() {
    User user = new User("john");
    userController.createUser(user);
    assertTrue(userRepository.existsByName("john"));
}

// E2E Test (Top of pyramid)
@Test
void userRegistration_CompleteFlow_Success() {
    driver.get("/register");
    driver.findElement(By.id("username")).sendKeys("john");
    driver.findElement(By.id("submit")).click();
    assertTrue(driver.findElement(By.id("welcome")).isDisplayed());
}
```
</details>

## Benefits

- **Cost efficiency**: More unit tests, fewer expensive E2E tests
- **Fast feedback**: Unit tests run quickly in development
- **Reliability**: Unit tests are more stable and predictable
- **Better coverage**: Many small tests cover edge cases effectively

## Best Practices

1. **Focus on unit tests** for business logic
2. **Use integration tests** for component interactions
3. **Minimize E2E tests** to critical user journeys
4. **Maintain the pyramid shape** - avoid inverted pyramid
5. **Run tests at appropriate levels** in CI/CD pipeline